---
phase: 19-bias-ui-improvements
plan: 01
type: execute
---

<objective>
BiasManager UI 개선 및 개인 멤버 자동완성 기능 추가

Purpose:
1. "최애 추가" / "그룹으로 추가" 버튼 텍스트 줄바꿈 문제 해결
2. 개인 최애 추가 시 kpopnet 데이터에서 그룹 정보 자동 연결

Output: BiasManager에서 개인 멤버명 입력 시 그룹 자동완성, 버튼 레이아웃 수정
</objective>

<context>
@.planning/STATE.md
@.planning/ROADMAP.md
@src/components/BiasManager.tsx
@src/lib/kpop-data.ts
@src/app/api/kpop/groups/route.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: 버튼 레이아웃 수정</name>
  <files>src/components/BiasManager.tsx</files>
  <action>
BiasManager.tsx의 "최애 추가" / "그룹으로 추가" 버튼 영역 수정:
- 현재: `flex gap-2`로 가로 배치 → 공간 부족 시 텍스트 줄바꿈 발생
- 수정: `flex flex-col gap-1`로 세로 배치 또는 `flex flex-wrap gap-2`로 감싸기
- 버튼 텍스트에 `whitespace-nowrap` 추가하여 줄바꿈 방지
- 버튼 전체 너비를 줄여 한 줄에 들어가게 조정

버튼 영역 (969-989행) 수정 방향:
```tsx
<div className="flex flex-col gap-1">
  <button className="... whitespace-nowrap">최애 추가</button>
  <button className="... whitespace-nowrap">그룹으로 추가</button>
</div>
```
  </action>
  <verify>npm run build 성공, 버튼 텍스트가 줄바꿈 없이 표시됨</verify>
  <done>두 버튼이 세로로 정렬되어 텍스트 줄바꿈 없이 표시됨</done>
</task>

<task type="auto">
  <name>Task 2: kpopnet 멤버 검색 API 추가</name>
  <files>src/lib/kpop-data.ts, src/app/api/kpop/members/route.ts</files>
  <action>
1. src/lib/kpop-data.ts에 멤버 검색 함수 추가:
```typescript
/**
 * Search for K-pop idols by name (English or Korean)
 * Returns top 10 matches with their group info
 */
export function searchMembers(query: string): KpopMemberWithGroup[] {
  // kpopData.idols에서 검색
  // 각 아이돌의 그룹 정보도 함께 반환
  // idol이 속한 group.members에서 idol_id 매칭으로 그룹 찾기
}
```

2. src/app/api/kpop/members/route.ts 생성:
- GET /api/kpop/members?q=검색어
- searchMembers 함수 호출
- 멤버 이름 + 그룹 정보 반환
  </action>
  <verify>curl "localhost:3000/api/kpop/members?q=카리나" 로 aespa 그룹 정보와 함께 반환</verify>
  <done>멤버 검색 API가 그룹 정보와 함께 결과 반환</done>
</task>

<task type="auto">
  <name>Task 3: 최애 추가 폼에 멤버 자동완성 추가</name>
  <files>src/components/BiasManager.tsx</files>
  <action>
BiasManager의 "최애 추가" 폼(isFormOpen 상태)에 자동완성 기능 추가:

1. 이름 입력 필드에 자동완성 드롭다운 추가:
   - name 필드 입력 시 /api/kpop/members 검색
   - 300ms 디바운스 적용
   - 드롭다운에 멤버 이름 + 그룹명 표시

2. 멤버 선택 시:
   - name 필드: 선택한 멤버의 name_original (한글)
   - nameEn 필드: 선택한 멤버의 name (영어)
   - nameKo 필드: 선택한 멤버의 name_original (한글)
   - groupName 필드: 선택한 멤버의 그룹 name_original (한글)
   - 모든 필드 자동 채워짐

3. 수동 입력도 여전히 가능하게 유지:
   - 드롭다운에서 선택 안 하고 직접 입력 가능
   - 자동완성 결과 없으면 드롭다운 숨김

UI 패턴: 기존 그룹 검색 드롭다운(groupQuery, showDropdown)과 동일한 패턴 사용
  </action>
  <verify>npm run build 성공, "카리나" 입력 시 드롭다운에 aespa 그룹 정보와 함께 표시</verify>
  <done>최애 추가 시 멤버명 자동완성되고 그룹 정보 자동 연결</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] npm run build 성공
- [ ] "최애 추가" / "그룹으로 추가" 버튼 텍스트 줄바꿈 없음
- [ ] 개인 멤버 이름 입력 시 자동완성 드롭다운 표시
- [ ] 멤버 선택 시 그룹명, 영어/한글 이름 자동 채움
- [ ] 기존 수동 입력 기능 유지
</verification>

<success_criteria>
- 버튼 텍스트 줄바꿈 문제 해결
- 개인 멤버 추가 시 그룹 자동 연결 기능 동작
- 기존 "그룹으로 추가" 기능 영향 없음
</success_criteria>

<output>
After completion, create `.planning/phases/19-bias-ui-improvements/19-01-SUMMARY.md`
</output>
