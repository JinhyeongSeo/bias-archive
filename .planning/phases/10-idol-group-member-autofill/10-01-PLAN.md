---
phase: 10-idol-group-member-autofill
plan: 01
type: execute
depends_on: []
files_modified: [package.json, src/lib/kpop-data.ts, src/app/api/kpop/groups/route.ts]
---

<objective>
kpopnet.json 데이터를 프로젝트에 통합하고 그룹 검색 API를 구현한다.

Purpose: 아이돌 그룹 자동완성 기능의 데이터 기반 마련
Output: 그룹 검색 API 엔드포인트 및 데이터 접근 유틸리티
</objective>

<execution_context>
./.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Tech stack available:**
- Next.js 15 App Router
- Supabase (DB)
- TypeScript

**리서치 결과:**
- 데이터 소스: kpopnet.json (npm 패키지)
- 182개 그룹, 835명 아이돌
- 라이선스: CC0-1.0 (퍼블릭 도메인)
- 구조:
  - groups[]: { id, name (영어), name_original (한글), members[] }
  - idols[]: { id, name (활동명 영어), name_original (활동명 한글) }
  - members[].idol_id로 idols 참조

@src/lib/biases.ts
@src/types/database.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: kpopnet.json 패키지 설치</name>
  <files>package.json</files>
  <action>npm install kpopnet.json 실행하여 K-pop 아이돌 데이터 패키지 설치. 이 패키지는 빌드타임에 JSON 데이터가 번들에 포함됨.</action>
  <verify>npm ls kpopnet.json으로 설치 확인</verify>
  <done>kpopnet.json이 dependencies에 추가됨</done>
</task>

<task type="auto">
  <name>Task 2: K-pop 데이터 유틸리티 모듈 생성</name>
  <files>src/lib/kpop-data.ts</files>
  <action>
kpopnet.json 데이터를 로드하고 검색하는 유틸리티 생성:

1. kpopnet.json import 및 타입 정의
2. searchGroups(query: string): 그룹명(영어/한글) 검색, 상위 10개 반환
3. getGroupMembers(groupId: string): 그룹 ID로 멤버 목록 조회, 각 멤버의 name/name_original 포함
4. 검색은 name과 name_original 모두에서 부분 일치(includes) 적용, 대소문자 무시

타입 정의:
- KpopGroup: { id, name, name_original, memberCount }
- KpopMember: { id, name, name_original }
  </action>
  <verify>TypeScript 컴파일 에러 없음 (npm run build로 확인)</verify>
  <done>searchGroups와 getGroupMembers 함수가 export됨</done>
</task>

<task type="auto">
  <name>Task 3: 그룹 검색 API 엔드포인트 생성</name>
  <files>src/app/api/kpop/groups/route.ts</files>
  <action>
GET /api/kpop/groups?q=검색어 엔드포인트 구현:

1. query parameter 'q'로 검색어 받음
2. 검색어 없으면 400 에러 반환
3. searchGroups 호출하여 결과 반환
4. 결과 형식: { groups: KpopGroup[] }

에러 처리:
- 400: 검색어 누락
- 500: 서버 에러
  </action>
  <verify>curl "http://localhost:3000/api/kpop/groups?q=IVE"로 그룹 검색 결과 확인</verify>
  <done>IVE, 아이브, TWICE 등 검색 시 올바른 그룹 정보 반환</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] npm run build 성공
- [ ] GET /api/kpop/groups?q=IVE 응답 확인
- [ ] GET /api/kpop/groups?q=아이브 (한글 검색) 응답 확인
- [ ] 검색어 없이 호출 시 400 에러
</verification>

<success_criteria>

- kpopnet.json 패키지 설치됨
- searchGroups, getGroupMembers 유틸리티 작동
- /api/kpop/groups API 엔드포인트 작동
- 영어/한글 그룹명 모두 검색 가능
</success_criteria>

<output>
After completion, create `.planning/phases/10-idol-group-member-autofill/10-01-SUMMARY.md`:

# Phase 10 Plan 01: K-pop 데이터 통합 Summary

**[요약 작성]**

## Accomplishments

- [Key outcome 1]
- [Key outcome 2]

## Files Created/Modified

- `package.json` - kpopnet.json 의존성 추가
- `src/lib/kpop-data.ts` - K-pop 데이터 유틸리티
- `src/app/api/kpop/groups/route.ts` - 그룹 검색 API

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Ready for 10-02-PLAN.md (UI 통합 및 멤버 일괄 추가)
</output>
