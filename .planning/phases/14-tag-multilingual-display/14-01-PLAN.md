---
phase: 14-tag-multilingual-display
plan: 01
type: execute
depends_on: []
files_modified: [src/contexts/NameLanguageContext.tsx, src/components/LinkCard.tsx, src/components/ViewerModal.tsx, src/components/Timeline.tsx, src/components/Sidebar.tsx]
---

<objective>
언어 모드(EN/KO/Auto)에 따라 태그를 해당 언어로 표시하도록 구현.

Purpose: 태그 "Sullyoon"이 한글 모드에서 "설윤"으로 표시되어 일관된 다국어 UX 제공
Output: 모든 태그 표시 위치에서 언어 모드에 따른 이름 전환 동작
</objective>

<execution_context>
./.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/12-language-toggle-ui/12-01-SUMMARY.md
@.planning/phases/13-enhanced-tag-matching/13-01-SUMMARY.md

# 핵심 파일
@src/contexts/NameLanguageContext.tsx
@src/types/database.ts

# 태그 표시 컴포넌트
@src/components/LinkCard.tsx
@src/components/ViewerModal.tsx
@src/components/Timeline.tsx
@src/components/Sidebar.tsx

**Constraining decisions:**
- Phase 12: NameLanguageContext로 이름 표시 언어 관리 (UI locale과 독립적)
- Phase 12: auto 모드는 UI locale에 따라 name_en/name_ko 선택
- Phase 13: 태그 저장은 bias.name 사용 (표시 일관성)
- 기존 태그 저장 방식 유지 (name 필드), 표시만 언어 모드에 따라 변환
</context>

<tasks>

<task type="auto">
  <name>Task 1: getTagDisplayName 헬퍼 함수 추가</name>
  <files>src/contexts/NameLanguageContext.tsx</files>
  <action>
NameLanguageContext에 태그 이름을 언어 모드에 맞게 변환하는 함수 추가:

1. Context에 `biases` 상태 추가 (API에서 fetch)
2. `getTagDisplayName(tagName: string): string` 함수 구현:
   - biases 배열에서 name, name_en, name_ko 중 tagName과 일치하는 bias 찾기
   - 현재 언어 모드(en/ko/auto)에 따라:
     - en: bias.name_en || tagName
     - ko: bias.name_ko || tagName
     - auto: locale 따라 선택
   - 매칭되는 bias 없으면 원본 tagName 반환
3. NameLanguageProvider에서 biases fetch (mount 시 1회)
4. mounted 상태 활용하여 hydration 문제 방지

주의: biases fetch는 한 번만 수행하고 캐싱. 새 bias 추가 시 RefreshContext의 tagRefreshTrigger를 활용하여 갱신.
  </action>
  <verify>TypeScript 에러 없음, Context에 getTagDisplayName 함수 추가됨</verify>
  <done>getTagDisplayName 함수가 언어 모드에 따라 태그 이름을 변환</done>
</task>

<task type="auto">
  <name>Task 2: 태그 표시 컴포넌트 업데이트</name>
  <files>src/components/LinkCard.tsx, src/components/ViewerModal.tsx, src/components/Timeline.tsx, src/components/Sidebar.tsx</files>
  <action>
각 컴포넌트에서 태그 표시 시 getTagDisplayName 사용:

1. **LinkCard.tsx** (2곳 - list/grid 레이아웃):
   - import { useNameLanguage } from '@/contexts/NameLanguageContext'
   - const { getTagDisplayName } = useNameLanguage()
   - {tag.name} → {getTagDisplayName(tag.name)}

2. **ViewerModal.tsx** (1곳 - footer 태그):
   - import { useNameLanguage } from '@/contexts/NameLanguageContext'
   - const { getTagDisplayName } = useNameLanguage()
   - {tag.name} → {getTagDisplayName(tag.name)}

3. **Timeline.tsx** (1곳 - 카드 태그):
   - import { useNameLanguage } from '@/contexts/NameLanguageContext'
   - const { getTagDisplayName } = useNameLanguage() (TimelineCard 내부)
   - {tag.name} → {getTagDisplayName(tag.name)}

4. **Sidebar.tsx** (2곳 - 선택된 태그, 태그 목록):
   - import { useNameLanguage } from '@/contexts/NameLanguageContext'
   - const { getTagDisplayName } = useNameLanguage()
   - tags.find(...).name → getTagDisplayName(tags.find(...).name || '')
   - {tag.name} → {getTagDisplayName(tag.name)}

주의: mounted 상태 체크하여 서버/클라이언트 불일치 방지. 필요 시 원본 이름을 fallback으로 표시.
  </action>
  <verify>npm run build 성공, 모든 태그 표시 위치에서 getTagDisplayName 사용</verify>
  <done>모든 컴포넌트에서 언어 모드에 따라 태그 표시 변환됨</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] npm run build 성공
- [ ] 개발 서버에서 EN 모드: 태그가 영어로 표시 (예: "Sullyoon")
- [ ] 개발 서버에서 KO 모드: 태그가 한글로 표시 (예: "설윤")
- [ ] Auto 모드: UI locale에 따라 자동 전환
- [ ] biases에 등록되지 않은 태그는 원본 그대로 표시
</verification>

<success_criteria>

- Task 1, 2 완료
- 모든 verification 체크 통과
- TypeScript 에러 없음
- 태그가 언어 모드에 따라 올바르게 표시됨
  </success_criteria>

<output>
After completion, create `.planning/phases/14-tag-multilingual-display/14-01-SUMMARY.md`
</output>
