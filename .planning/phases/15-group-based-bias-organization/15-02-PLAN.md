---
phase: 15-group-based-bias-organization
plan: 02
type: execute
depends_on: ["15-01"]
files_modified:
  - src/components/BiasManager.tsx
  - src/components/Sidebar.tsx
domain: null
---

<objective>
BiasManager에서 최애를 그룹별로 분류하여 표시하고, Sidebar 태그 필터에도 그룹별 섹션을 추가한다.

Purpose: 많은 최애를 관리할 때 그룹별로 정리하여 가독성과 사용성 향상
Output: 그룹별 접기/펼치기 UI, 그룹 없는 최애 별도 표시, 태그 필터 그룹 분류
</objective>

<execution_context>
./.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior plan in this phase:
@.planning/phases/15-group-based-bias-organization/15-01-SUMMARY.md

# Key files:
@src/components/BiasManager.tsx
@src/components/Sidebar.tsx
@src/contexts/NameLanguageContext.tsx

**Tech available from 15-01:**
- groups 테이블 및 Group 타입
- getBiasesWithGroups() 함수
- biases.group_id FK

**Established patterns:**
- getDisplayName으로 언어 모드에 따른 이름 표시
- refreshTrigger 패턴으로 목록 새로고침
- Tailwind CSS로 접기/펼치기 애니메이션
</context>

<tasks>

<task type="auto">
  <name>Task 1: BiasManager 그룹별 분류 UI</name>
  <files>src/components/BiasManager.tsx</files>
  <action>
1. BiasManager props 또는 내부에서 biases를 group별로 그룹화:
   - 그룹이 있는 최애: group_id 기준으로 묶음
   - 그룹 없는 최애: 별도 섹션으로 표시

2. 그룹별 접기/펼치기 UI 구현:
   - 각 그룹 헤더에 접기/펼치기 버튼 (chevron 아이콘)
   - localStorage에 접힌 그룹 상태 저장 (bias-manager-collapsed-groups)
   - 그룹 이름은 getDisplayName 패턴 활용 (language mode에 따라 name_en/name_ko 표시)

3. UI 구조:
   ```
   [그룹명1] ▼ (3명)
     - 멤버1 (그룹명1) ×
     - 멤버2 (그룹명1) ×
     - 멤버3 (그룹명1) ×
   [그룹명2] ▶ (접힌 상태, 2명)
   [그룹 없음] (1명)
     - 솔로멤버 ×
   ```

4. 기존 기능 유지:
   - 개별 최애 추가 폼
   - 그룹으로 추가 모드 (기존 kpopnet 연동)
   - 최애 삭제 기능
  </action>
  <verify>
- 그룹별로 최애가 분류되어 표시됨
- 그룹 헤더 클릭 시 접기/펼치기 작동
- 새로고침 후에도 접힌 상태 유지
- npm run build 성공
  </verify>
  <done>
- 그룹별 분류 UI 구현됨
- 접기/펼치기 상태 localStorage에 저장됨
- 그룹 없는 최애 별도 표시됨
  </done>
</task>

<task type="auto">
  <name>Task 2: Sidebar 태그 필터 그룹 분류</name>
  <files>src/components/Sidebar.tsx</files>
  <action>
1. Sidebar의 "태그 선택" 섹션에서 biases 기반 태그를 그룹별로 분류:
   - 현재: 모든 bias 태그가 flat하게 나열
   - 변경: 그룹별로 묶어서 표시, 그룹 헤더에 그룹명 표시

2. 그룹별 UI:
   ```
   [IVE]
     장원영  안유진  레이  ...
   [NewJeans]
     민지  하니  다니엘  ...
   [그룹 없음]
     솔로태그1  솔로태그2
   ```

3. 그룹 헤더는 클릭 불가 (시각적 구분용)
   - 개별 태그만 클릭하여 필터 적용

4. 그룹명 표시도 language mode 적용:
   - EN 모드: group.name_en (없으면 name)
   - KO 모드: group.name_ko (없으면 name)
   - Auto 모드: locale에 따라 선택
  </action>
  <verify>
- Sidebar에서 태그가 그룹별로 분류되어 표시됨
- 언어 모드 전환 시 그룹명도 전환됨
- 태그 클릭 시 필터 정상 작동
- npm run build 성공
  </verify>
  <done>
- Sidebar 태그가 그룹별로 분류됨
- 그룹명이 language mode에 따라 표시됨
- 기존 필터 기능 유지
  </done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` 성공
- [ ] BiasManager에서 그룹별 분류 표시됨
- [ ] 그룹 접기/펼치기 작동 및 상태 저장됨
- [ ] Sidebar 태그가 그룹별로 분류됨
- [ ] 언어 모드 전환 시 그룹명 전환됨
</verification>

<success_criteria>

- BiasManager 그룹별 분류 UI 완성
- 접기/펼치기 상태 localStorage 저장
- Sidebar 태그 그룹별 분류
- Phase 15 complete
</success_criteria>

<output>
After completion, create `.planning/phases/15-group-based-bias-organization/15-02-SUMMARY.md`:

# Phase 15 Plan 02: Group-Based UI Summary

**[one-liner]**

## Accomplishments

- [outcomes]

## Files Created/Modified

- [files]

## Decisions Made

- [decisions]

## Issues Encountered

- [issues or "None"]

## Next Phase Readiness

- Phase 15 완료
- v1.2 Group Organization 마일스톤 완료
</output>
