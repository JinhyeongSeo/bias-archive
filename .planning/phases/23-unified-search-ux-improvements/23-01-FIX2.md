---
phase: 23-unified-search-ux-improvements
plan: 01-FIX2
type: fix
---

<objective>
Fix 2 UAT issues from plan 23-01 (second round of fixes).

Source: 23-01-ISSUES.md (UAT-007, UAT-008)
Priority: 0 critical, 2 major, 0 minor
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/ROADMAP.md

**Issues being fixed:**
@.planning/phases/23-unified-search-ux-improvements/23-01-ISSUES.md

**Original plan for reference:**
@.planning/phases/23-unified-search-ux-improvements/23-01-PLAN.md

**Current implementation:**
@src/components/UnifiedSearch.tsx

**UAT-007 (Major):** 드롭다운 높이가 검색어 선택 후 답답함. 검색어 선택 시 드롭다운 아래 영역이 사라지면서 드롭다운 영역도 좁아져 스크롤이 많이 필요함. 사용자는 드롭다운이 모달 밖으로 나가도 되니 더 넓게 표시되길 원함.

**UAT-008 (Major):** 성 제거 로직이 예명에도 적용되는 버그. "윈터" 같은 예명에서도 첫 글자가 제거되어 "터"로 검색됨. 실명(3글자 이상 한국식 이름)에만 적용해야 함.
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix UAT-007 - 드롭다운 높이 확장</name>
  <files>src/components/UnifiedSearch.tsx</files>
  <action>
  드롭다운이 검색어 선택 후에도 충분한 높이를 유지하도록 수정:

  1. max-h-48 → max-h-80 또는 그 이상으로 확장 (약 320px)
  2. 드롭다운 위치를 absolute로 설정하여 모달 콘텐츠 위에 오버레이되도록 함
  3. z-index 추가하여 다른 요소 위에 표시
  4. 모달 내 다른 요소들의 레이아웃에 영향 주지 않도록 구현

  핵심: 드롭다운이 열렸을 때 아래 컨텐츠를 밀어내지 않고 위에 오버레이되어 넓은 영역 제공
  </action>
  <verify>드롭다운을 열었을 때 충분히 많은 아이돌/그룹이 스크롤 없이 표시됨</verify>
  <done>드롭다운이 모달 내에서 오버레이로 표시되며 충분한 높이 제공</done>
</task>

<task type="auto">
  <name>Task 2: Fix UAT-008 - 성 제거 로직을 한국 실명에만 적용</name>
  <files>src/components/UnifiedSearch.tsx</files>
  <action>
  현재 removeKoreanSurname 함수가 모든 한글 2-4자 이름에서 첫 글자를 제거하는 문제 수정:

  **수정된 로직:** 첫 글자가 한국 성씨 + 정확히 3글자인 경우에만 성 제거

  1. 한국 상위 100개 성씨 목록 정의:
     ```typescript
     const KOREAN_SURNAMES = new Set([
       '김', '이', '박', '최', '정', '강', '조', '윤', '장', '임',
       '한', '오', '서', '신', '권', '황', '안', '송', '전', '홍',
       '유', '고', '문', '양', '손', '배', '백', '허', '노', '심',
       '하', '주', '구', '곽', '성', '차', '우', '민', '류', '나',
       '진', '지', '엄', '채', '원', '천', '방', '공', '현', '함',
       '변', '염', '여', '추', '도', '소', '석', '선', '설', '마',
       '길', '연', '위', '표', '명', '기', '반', '피', '왕', '금',
       '옥', '육', '인', '맹', '남', '탁', '국', '어', '경', '은',
       '편', '제', '빈', '봉', '사', '부', '황보', '남궁', '제갈', '선우'
     ]);
     ```

  2. removeKoreanSurname 함수 수정:
     ```typescript
     function removeKoreanSurname(name: string): string {
       // 조건: 정확히 3글자 한글 이름 + 첫 글자가 한국 성씨
       const isThreeCharKorean = /^[가-힣]{3}$/.test(name);
       const firstCharIsSurname = KOREAN_SURNAMES.has(name.charAt(0));

       if (isThreeCharKorean && firstCharIsSurname) {
         return name.slice(1); // 성(첫 글자) 제거
       }
       return name; // 그 외는 전체 이름 사용
     }
     ```

  결과:
  - "안유진" (3글자, "안"은 성씨) → "유진" ✓
  - "장원영" (3글자, "장"은 성씨) → "원영" ✓
  - "윈터" (2글자) → "윈터" ✓
  - "카리나" (3글자, "카"는 성씨 아님) → "카리나" ✓
  - "닝닝" (2글자) → "닝닝" ✓
  </action>
  <verify>"윈터" 선택 시 "윈터"로 검색, "안유진" 선택 시 "유진"으로 검색</verify>
  <done>성 제거 로직이 한국 실명(3글자+성씨)에만 적용됨</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] All major issues fixed
- [ ] npm run build succeeds
- [ ] 드롭다운이 충분히 넓게 표시됨 (모달 내 오버레이)
- [ ] 모든 아이돌 이름이 전체로 검색됨 (성 제거 없음)
</verification>

<success_criteria>
- All UAT issues from 23-01-ISSUES.md addressed (UAT-007, UAT-008)
- Tests pass
- Ready for re-verification
</success_criteria>

<output>
After completion, create `.planning/phases/23-unified-search-ux-improvements/23-01-FIX2-SUMMARY.md`
</output>
