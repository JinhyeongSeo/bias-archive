---
phase: 07-deploy-pwa
plan: 01
type: execute
depends_on: []
files_modified: []
---

<objective>
Vercel에 Next.js 앱을 배포하고 환경 변수를 설정한다.

Purpose: 프로덕션 환경에서 앱을 사용할 수 있도록 배포
Output: 작동하는 프로덕션 URL, 환경 변수 설정 완료
</objective>

<execution_context>
./.claude/get-shit-done/workflows/execute-plan.md
./summary.md
./.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@package.json
@next.config.ts

**Tech stack:** Next.js 16.1.1, Supabase, next-intl
**Constraints:** Vercel 무료 티어 배포
**Prior decisions:** npm 사용 (pnpm 미설치)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Vercel CLI로 프로젝트 배포</name>
  <files>vercel.json (optional)</files>
  <action>
1. Vercel CLI가 설치되어 있는지 확인 (`npx vercel --version`)
2. 만약 인증이 필요하면 auth gate 생성
3. `npx vercel --yes` 실행하여 프로젝트 배포 (preview deployment)
4. 배포 URL 캡처

주의: vercel.json은 기본 설정이면 필요 없음. Next.js 자동 감지.
  </action>
  <verify>vercel ls 명령으로 deployment가 보이는지 확인</verify>
  <done>Preview deployment URL이 생성됨</done>
</task>

<task type="auto">
  <name>Task 2: 환경 변수 설정</name>
  <files>.env.local (참조용)</files>
  <action>
1. 로컬 .env.local 파일에서 필요한 환경 변수 확인:
   - NEXT_PUBLIC_SUPABASE_URL
   - NEXT_PUBLIC_SUPABASE_ANON_KEY
   - NEXT_PUBLIC_YOUTUBE_API_KEY (있는 경우)
   - NEXT_PUBLIC_GOOGLE_CSE_ID (있는 경우)
   - NEXT_PUBLIC_GOOGLE_CSE_API_KEY (있는 경우)

2. Vercel CLI로 환경 변수 추가:
   ```bash
   npx vercel env add NEXT_PUBLIC_SUPABASE_URL production
   npx vercel env add NEXT_PUBLIC_SUPABASE_ANON_KEY production
   ```
   (필요한 변수 각각에 대해)

3. 환경 변수가 설정되면 재배포:
   `npx vercel --prod --yes`

주의: NEXT_PUBLIC_ 접두사 변수는 클라이언트에서 접근 가능하므로, 민감하지 않은 키만 사용.
  </action>
  <verify>npx vercel env ls 명령으로 환경 변수 목록 확인</verify>
  <done>모든 필수 환경 변수가 production에 설정됨, 프로덕션 배포 완료</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Vercel 프로덕션 배포 완료</what-built>
  <how-to-verify>
    1. 배포된 프로덕션 URL 방문
    2. 확인사항:
       - 홈페이지가 정상 로드되는지
       - 다크모드 토글이 작동하는지
       - 언어 전환(한/영)이 작동하는지
       - Supabase 연결이 정상인지 (링크 목록 로드)
       - GIF 페이지 접근 가능한지
    3. 브라우저 콘솔에 에러가 없는지 확인
  </how-to-verify>
  <resume-signal>"approved"를 입력하거나 발견된 문제를 설명해주세요</resume-signal>
</task>

</tasks>

<verification>
Phase 완료 전 확인:
- [ ] Vercel 프로젝트가 생성됨
- [ ] 환경 변수가 설정됨
- [ ] 프로덕션 배포가 완료됨
- [ ] 기본 기능이 프로덕션에서 작동함
</verification>

<success_criteria>

- Vercel 프로덕션 URL이 작동함
- 환경 변수가 올바르게 설정됨
- Supabase 연결이 프로덕션에서 정상 작동
- 사용자가 배포된 앱에 접근 가능
</success_criteria>

<output>
완료 후 `.planning/phases/07-deploy-pwa/07-01-SUMMARY.md` 생성:

# Plan 07-01: Vercel 배포 Summary

**[프로덕션 URL과 배포 상태]**

## Accomplishments

- [배포 결과]

## Files Created/Modified

- (해당시 vercel.json 등)

## Decisions Made

- [배포 관련 결정사항]

## Issues Encountered

- [문제와 해결 방법]

## Next Step

Ready for 07-02-PLAN.md (PWA 설정)
</output>
