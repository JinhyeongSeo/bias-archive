---
phase: 13-enhanced-tag-matching
plan: 01-FIX
type: fix
---

<objective>
Fix 1 UAT issue from plan 13-01.

Source: 13-01-ISSUES.md
Priority: 0 critical, 1 major, 0 minor

**Note:** UAT-002 (태그 다국어 표시)는 Phase 13 범위를 넘어서는 새로운 기능이므로 별도 Phase로 추가 필요.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/ROADMAP.md

**Issues being fixed:**
@.planning/phases/13-enhanced-tag-matching/13-01-ISSUES.md

**Original plan for reference:**
@.planning/phases/13-enhanced-tag-matching/13-01-PLAN.md

**Key source file:**
@src/lib/autoTag.ts
</context>

<tasks>

<task type="auto">
  <name>Fix UAT-001: 그룹 이름 매칭 시 그룹명 태그 추가</name>
  <files>src/lib/autoTag.ts</files>
  <action>
extractAutoTags 함수의 그룹 이름 매칭 로직 수정:

**현재 동작 (문제):**
- 88-92번째 줄에서 bias.group_name이 텍스트에 있으면 bias.name(멤버명)을 태그로 추가
- 결과: "NMIXX 설윤 직캠"에서 NMIXX 그룹 모든 멤버가 태그됨

**수정 방향:**
1. 그룹 이름 매칭 시 bias.group_name 자체를 태그로 추가
2. 중복 방지: Set에 group_name을 추가하므로 자동 중복 제거

**코드 변경:**
```typescript
// Check for group name match
// If group name matches, add the group name itself as a tag
if (bias.group_name && isNameInText(normalizedText, bias.group_name)) {
  matchedTags.add(bias.group_name)  // ← 그룹 이름을 태그로 추가 (멤버명 대신)
}
```

**결과:**
- "NMIXX 설윤 직캠" → ["설윤", "NMIXX"] (설윤은 name/name_en/name_ko 매칭으로)
- "NMIXX 신곡 무대" → ["NMIXX"] (그룹 태그만)

**주석 업데이트:**
- 함수 docstring에 그룹 이름 매칭 동작 설명 추가
  </action>
  <verify>npm run build && npm run lint -- src/lib/autoTag.ts</verify>
  <done>
- 그룹 이름 매칭 시 그룹명 자체가 태그로 추가됨
- 개별 멤버명 매칭은 기존대로 동작
- 빌드 및 린트 성공
  </done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] 그룹 이름이 텍스트에 있으면 그룹명 태그 추가
- [ ] 멤버 이름이 텍스트에 있으면 멤버명 태그 추가 (기존 동작 유지)
- [ ] 그룹+멤버 둘 다 있으면 둘 다 태그 (예: "NMIXX 설윤" → ["설윤", "NMIXX"])
- [ ] npm run build 성공
- [ ] npm run lint 성공
</verification>

<success_criteria>
- UAT-001 해결: 그룹 이름 매칭 시 그룹명 태그 추가
- 기존 양방향 매칭 동작 유지
- 빌드/린트 통과
</success_criteria>

<output>
After completion, create `.planning/phases/13-enhanced-tag-matching/13-01-FIX-SUMMARY.md`
</output>
