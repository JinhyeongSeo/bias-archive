---
phase: 27-selca-external-search
plan: 27-01-FIX
type: fix
---

<objective>
Fix 1 UAT issue from plan 27-01 - Selca 탭이 ExternalSearch 모달에 표시되지 않는 문제 해결

Source: 27-01-ISSUES.md
Priority: 1 blocker
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/ROADMAP.md

**Issues being fixed:**
@.planning/phases/27-selca-external-search/27-01-ISSUES.md

**Original plan for reference:**
@.planning/phases/27-selca-external-search/27-01-PLAN.md

**Key files to investigate:**
@src/components/ExternalSearch.tsx
@src/lib/parsers/index.ts
@src/app/api/search/selca/route.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: ExternalSearch 컴포넌트 조사 및 selca 탭 추가 확인</name>
  <files>src/components/ExternalSearch.tsx, src/lib/parsers/index.ts</files>
  <action>
  UAT-001 문제 원인 파악 및 수정:

  1. ExternalSearch.tsx 파일 읽기:
     - Platform 타입에 'selca'가 정의되어 있는지 확인
     - 탭 버튼 렌더링 부분에 selca가 포함되어 있는지 확인
     - selca 관련 상태(selcaResults, selcaPage 등)가 선언되어 있는지 확인
     - handleSearch 함수에 selca 케이스가 구현되어 있는지 확인

  2. src/lib/parsers/index.ts 파일 읽기:
     - Platform 타입에 'selca'가 export되어 있는지 확인

  3. 문제 발견 시 수정:
     - Platform 타입에 'selca' 추가 (타입스크립트)
     - 탭 버튼 목록에 selca 추가 (UI 렌더링)
     - selca 관련 상태 변수 추가 (useState)
     - handleSearch에 selca 케이스 추가 (/api/search/selca 호출)
     - 검색 결과 렌더링에 selca 케이스 추가
     - 페이지네이션 상태 추가 (selcaPage, selcaTotalPages)

  4. 보라색 테마 적용:
     - 탭 버튼: active 시 bg-purple-500, hover 시 bg-purple-100
     - 검색 결과 카드: border-purple-200
     - 저장 버튼: bg-purple-600 hover:bg-purple-700
     - 플랫폼 배지: bg-purple-100 text-purple-700

  주의사항:
  - 기존 플랫폼(youtube, twitter, heye, kgirls)과 동일한 구조 유지
  - Platform 타입이 여러 파일에서 사용될 수 있으므로 모든 곳에 추가 필요
  - TypeScript 타입 일관성 유지
  </action>
  <verify>
  - npm run build 성공 (TypeScript 에러 없음)
  - src/components/ExternalSearch.tsx에 selca 관련 코드 존재 확인
  - src/lib/parsers/index.ts의 Platform 타입에 'selca' 포함 확인
  </verify>
  <done>
  - ExternalSearch 컴포넌트에 selca 탭 관련 코드 추가됨
  - Platform 타입에 'selca' 정의됨
  - 타입 에러 없음
  </done>
</task>

<task type="auto">
  <name>Task 2: LinkForm과 Timeline에 selca 플랫폼 색상 추가</name>
  <files>src/components/LinkForm.tsx, src/components/Timeline.tsx</files>
  <action>
  LinkForm과 Timeline 컴포넌트에 selca 플랫폼 색상 추가:

  1. LinkForm.tsx:
     - platformColors 객체에 'selca': 'purple' 또는 유사한 색상 추가
     - platform === 'selca' 케이스에 보라색 스타일 적용

  2. Timeline.tsx:
     - platformColors 객체에 'selca': 'text-purple-600 bg-purple-50' 또는 유사한 스타일 추가
     - platform === 'selca' 케이스에 보라색 배지 적용

  주의사항:
  - 기존 플랫폼 색상과 구분되는 보라색 사용
  - 다크모드 지원 확인
  - 기존 스타일 패턴 유지
  </action>
  <verify>
  - npm run build 성공
  - LinkForm.tsx에 selca 플랫폼 색상 정의 확인
  - Timeline.tsx에 selca 플랫폼 색상 정의 확인
  </verify>
  <done>
  - LinkForm에 selca 플랫폼 색상 추가됨
  - Timeline에 selca 플랫폼 색상 추가됨
  - 타입 에러 없음
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
  ExternalSearch 컴포넌트에 selca 탭 추가 및 플랫폼 색상 설정 완료
  </what-built>
  <how-to-verify>
  1. npm run dev로 개발 서버 실행
  2. 브라우저에서 애플리케이션 열기
  3. 통합검색 모달 열기
  4. 탭 목록 확인:
     - YouTube, Twitter, heye, kgirls와 함께 **Selca** 탭이 보이는지 확인
     - Selca 탭의 색상이 보라색 테마인지 확인
  5. Selca 탭 클릭 후 검색 테스트:
     - 검색어 입력 (예: "yujin", "wonyoung")
     - 검색 결과가 표시되는지 확인
     - 썸네일, 캡션, 저장 버튼 표시 확인
  6. 검색 결과에서 아이템 저장 후:
     - LinkList에 추가되었는지 확인
     - 플랫폼 배지가 보라색으로 표시되는지 확인
  </how-to-verify>
  <resume-signal>Type "approved" if selca tab appears and works correctly, or describe the issue</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] UAT-001 문제 해결됨 (selca 탭 표시됨)
- [ ] npm run build 성공 (TypeScript 에러 없음)
- [ ] ExternalSearch 모달에 selca 탭 표시 확인
- [ ] selca 검색 기능 정상 동작 확인
- [ ] 플랫폼 색상(보라색) 정상 표시 확인
- [ ] 원래 acceptance criteria 충족
</verification>

<success_criteria>
- UAT-001 issue from 27-01-ISSUES.md addressed
- Selca tab appears in ExternalSearch modal
- Selca search functionality works end-to-end
- Purple theme applied consistently
- Tests pass
- Ready for re-verification
</success_criteria>

<output>
After completion, create `.planning/phases/27-selca-external-search/27-01-FIX-SUMMARY.md`
</output>
