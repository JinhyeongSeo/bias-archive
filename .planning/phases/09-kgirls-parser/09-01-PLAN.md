---
phase: 09-kgirls-parser
plan: 01
type: execute
depends_on: []
files_modified: [src/lib/parsers/kgirls.ts, src/lib/parsers/index.ts, src/lib/metadata.ts]
domain: parsers
---

<objective>
kgirls.net 커뮤니티 파서 모듈 구현 및 플랫폼 통합

Purpose: kgirls.net(윤아저장소) 게시글에서 이미지/GIF/MP4를 자동 추출하여 아카이브에 저장
Output: kgirls.ts 파서 모듈, 플랫폼 감지 및 라우팅 통합
</objective>

<execution_context>
./.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/08-heye-parser/08-01-SUMMARY.md (참조: heye.kr 파서 패턴)
@src/lib/parsers/heye.ts (참조: 커뮤니티 파서 구조)
@src/lib/parsers/index.ts
@src/lib/metadata.ts

**Tech stack available:** cheerio, regex 기반 HTML 파싱
**Established patterns:** regex 기반 이미지 URL 추출 패턴
**Constraining decisions:**
- Phase 8: cheerio 대신 regex로 이미지 추출 (JS 렌더링 컨텐츠)
- Phase 8: 사이트 호스팅 이미지만 추출 (광고 필터링)

**kgirls.net 분석 결과:**
- 사이트: 윤아저장소 KGIRLS.NET (K-pop 아이돌 팬 갤러리)
- 게시판: `/issue` (볼거리), `/mgall` (마이너갤)
- 게시글 URL 패턴: `/mgall/{POST_ID}`, `/issue/{POST_ID}`
- 본문 영역: `.bd` selector
- 파일 경로: `/files/attach/`, `/files/thumbnails/`
- XE CMS 기반
</context>

<tasks>

<task type="auto">
  <name>Task 1: kgirls.net 파서 모듈 생성</name>
  <files>src/lib/parsers/kgirls.ts</files>
  <action>
  heye.ts 패턴을 참조하여 kgirls.net 전용 파서 구현:
  - cheerio로 HTML 파싱
  - /files/ 경로에서 이미지/GIF/MP4 추출
  - 썸네일 이미지 제외 (/100x100., /thumb_)
  - 제목은 h2 또는 title 태그에서 추출
  - 날짜는 YYYY.MM.DD 패턴 매칭
  - 작성자는 XE CMS 패턴 (.no_img, .nick)
  </action>
  <verify>TypeScript 컴파일 에러 없음</verify>
  <done>kgirls.ts 파서가 URL에서 메타데이터와 미디어를 추출</done>
</task>

<task type="auto">
  <name>Task 2: 플랫폼 통합 및 라우팅</name>
  <files>src/lib/parsers/index.ts, src/lib/metadata.ts</files>
  <action>
  - index.ts: Platform 타입에 'kgirls' 추가, parseKgirls export
  - metadata.ts: detectPlatform에 kgirls.net 감지 추가
  - metadata.ts: getParser에 kgirls 케이스 추가
  </action>
  <verify>npm run build 성공</verify>
  <done>kgirls.net URL 입력 시 kgirls 파서로 라우팅됨</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] kgirls.net URL이 'kgirls' 플랫폼으로 감지됨
- [ ] 파서가 이미지/GIF/MP4 URL을 추출함
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No TypeScript errors
- kgirls.net 게시글에서 미디어 추출 가능
</success_criteria>

<output>
After completion, create `.planning/phases/09-kgirls-parser/09-01-SUMMARY.md`
</output>
