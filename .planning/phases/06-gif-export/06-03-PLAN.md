---
phase: 06-gif-export
plan: 03
type: execute
depends_on: ["06-01", "06-02"]
files_modified: [src/i18n/*, messages/*, src/app/[locale]/*]
---

<objective>
한국어/영어 다국어(i18n) 인터페이스 지원

Purpose: 사용자가 한국어 또는 영어 UI를 선택할 수 있도록 함
Output: next-intl 기반 다국어 시스템, 언어 전환 UI
</objective>

<execution_context>
./.claude/get-shit-done/workflows/execute-plan.md
./summary.md
./.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/app/layout.tsx
@src/app/page.tsx
@src/components/Sidebar.tsx

**Tech available:** Next.js 16, React 19, TailwindCSS, next-themes
**Established patterns:** App Router 사용, 컴포넌트는 src/components/
**Research findings:**
- next-intl 패키지 사용
- App Router: [locale] 동적 세그먼트 방식
- messages/ko.json, messages/en.json으로 번역 파일 관리
- middleware.ts로 로케일 라우팅 처리
</context>

<tasks>

<task type="auto">
  <name>Task 1: next-intl 설정 및 라우팅 구성</name>
  <files>src/i18n/routing.ts, src/i18n/request.ts, src/middleware.ts, next.config.ts, messages/ko.json, messages/en.json</files>
  <action>
1. next-intl 패키지 설치: npm install next-intl

2. next.config.ts 수정:
   - createNextIntlPlugin 적용
   ```typescript
   import createNextIntlPlugin from 'next-intl/plugin';
   const withNextIntl = createNextIntlPlugin();
   export default withNextIntl(nextConfig);
   ```

3. src/i18n/routing.ts 생성:
   ```typescript
   import { defineRouting } from 'next-intl/routing';
   export const routing = defineRouting({
     locales: ['ko', 'en'],
     defaultLocale: 'ko'
   });
   ```

4. src/i18n/request.ts 생성:
   - getRequestConfig로 현재 로케일에 맞는 messages 로드

5. src/middleware.ts 생성:
   - createMiddleware로 로케일 라우팅 처리
   - matcher 설정: API routes 제외

6. messages/ko.json 생성:
   - 공통: app.title, app.description
   - 네비게이션: nav.home, nav.gif, nav.settings
   - 링크: link.add, link.delete, link.edit, link.search
   - 태그: tag.add, tag.filter, tag.all
   - GIF: gif.title, gif.upload, gif.create, gif.download, gif.progress
   - 내보내기: export.title, export.download, export.import, export.success
   - 일반: common.save, common.cancel, common.loading, common.error

7. messages/en.json 생성:
   - ko.json과 동일한 키로 영어 번역

주의: URL에 로케일 포함하는 방식 ([locale]/...) 사용
  </action>
  <verify>npm run build 성공, 설정 파일 생성 완료</verify>
  <done>next-intl 설정 완료, 라우팅 구성 완료</done>
</task>

<task type="auto">
  <name>Task 2: 앱 구조 마이그레이션 및 번역 적용</name>
  <files>src/app/[locale]/layout.tsx, src/app/[locale]/page.tsx, src/app/[locale]/gif/page.tsx, src/components/Sidebar.tsx, src/components/LanguageSwitcher.tsx</files>
  <action>
1. 앱 구조 재구성:
   - src/app/page.tsx → src/app/[locale]/page.tsx
   - src/app/layout.tsx → src/app/[locale]/layout.tsx (NextIntlClientProvider 래핑)
   - src/app/gif/page.tsx → src/app/[locale]/gif/page.tsx
   - 루트 layout.tsx는 최소화 (html, body만)

2. src/app/[locale]/layout.tsx 수정:
   - NextIntlClientProvider로 children 래핑
   - getMessages(), getLocale() 사용
   - html lang 속성에 locale 적용

3. src/components/LanguageSwitcher.tsx 생성:
   - 현재 언어 표시 (KO / EN)
   - 클릭 시 언어 전환 (useRouter, usePathname 활용)
   - 드롭다운 또는 토글 스타일

4. src/components/Sidebar.tsx 수정:
   - LanguageSwitcher 추가 (테마 토글 옆)
   - 하드코딩된 텍스트를 useTranslations()로 교체

5. 주요 컴포넌트 번역 적용:
   - LinkCard: 날짜 포맷, 버튼 텍스트
   - ExternalSearch: 플레이스홀더, 탭 이름
   - GifMaker: 라벨, 버튼 텍스트
   - ExportModal: 탭 이름, 버튼 텍스트

번역 키 패턴: useTranslations('namespace')로 네임스페이스별 접근
  </action>
  <verify>npm run build 성공, /ko와 /en 라우트 접근 가능</verify>
  <done>모든 UI 텍스트 번역 적용, 언어 전환 작동</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>한국어/영어 다국어 인터페이스</what-built>
  <how-to-verify>
    1. npm run dev 실행
    2. http://localhost:3000 접속 (기본 ko로 리다이렉트)
    3. 한국어 UI 확인 (모든 텍스트 한국어)
    4. 언어 전환 버튼 클릭 → 영어로 전환
    5. URL이 /en으로 변경 확인
    6. 영어 UI 확인 (모든 텍스트 영어)
    7. GIF 페이지 이동 → 언어 유지 확인
    8. 새로고침 → 언어 설정 유지 확인
    9. 다크모드 전환 → 언어 설정 유지 확인
  </how-to-verify>
  <resume-signal>Type "approved" or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] npm run build 성공
- [ ] /ko 라우트 접근 가능
- [ ] /en 라우트 접근 가능
- [ ] 모든 UI 텍스트 번역 적용
- [ ] 언어 전환 작동
- [ ] 페이지 이동 시 언어 유지
- [ ] 다크모드와 언어 설정 독립적
</verification>

<success_criteria>
- next-intl 기반 i18n 시스템 구축
- 한국어/영어 번역 파일 완성
- 언어 전환 UI 작동
- 모든 페이지에서 번역 적용
- 사용자 검증 통과
- Phase 6 완료
</success_criteria>

<output>
After completion, create `.planning/phases/06-gif-export/06-03-SUMMARY.md`
</output>
