---
phase: 21-design-overhaul
plan: 04
type: execute
depends_on: ["21-03"]
files_modified: [src/components/ViewerModal.tsx, src/components/Skeleton.tsx, src/components/LinkList.tsx]
---

<objective>
모달 애니메이션 개선 및 Skeleton 로딩 컴포넌트 생성

Purpose: 모달 열림/닫힘의 부드러운 전환, 로딩 상태의 시각적 피드백 개선
Output: 토스 스타일 모달 애니메이션, 재사용 가능한 Skeleton 컴포넌트
</objective>

<execution_context>
./.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/21-design-overhaul/DISCOVERY.md
@.planning/phases/21-design-overhaul/21-03-SUMMARY.md
@src/lib/animations.ts
@src/components/ViewerModal.tsx
@src/components/LinkList.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Improve ViewerModal animation</name>
  <files>src/components/ViewerModal.tsx</files>
  <action>
ViewerModal에 토스 스타일 모달 애니메이션 적용.

1. 백드롭: motion.div로 변경, fadeIn 애니메이션 (opacity 0 → 1)
2. 모달 컨테이너: motion.div로 변경, scaleIn + slideUp 조합
   - initial: { opacity: 0, scale: 0.95, y: 20 }
   - animate: { opacity: 1, scale: 1, y: 0 }
   - exit: { opacity: 0, scale: 0.95, y: 20 }
3. AnimatePresence로 전체 감싸서 exit 애니메이션 지원

transition: transitions.smoothSpring (부드러운 열림/닫힘)

닫기 버튼: press 효과 (whileTap: { scale: 0.9 })
원본 링크 버튼: press 효과 적용

createPortal 내부에서 AnimatePresence 사용 시 주의:
- AnimatePresence는 포털 외부에서 조건부 렌더링을 감싸야 함
- isOpen 상태에 따라 포털 내용물 전체가 마운트/언마운트
  </action>
  <verify>모달 열림 시 스케일+페이드+슬라이드 애니메이션, 닫힘 시 역재생 확인</verify>
  <done>ViewerModal에 부드러운 열림/닫힘 애니메이션 적용</done>
</task>

<task type="auto">
  <name>Task 2: Create Skeleton component</name>
  <files>src/components/Skeleton.tsx</files>
  <action>
재사용 가능한 Skeleton 컴포넌트 생성.

1. SkeletonCard: LinkCard와 동일한 레이아웃의 스켈레톤 (grid/list 모두 지원)
2. SkeletonText: 텍스트 플레이스홀더 (width prop으로 너비 조절)
3. SkeletonImage: 이미지/비디오 플레이스홀더 (aspect-ratio 지원)

Tailwind animate-pulse 활용:
- 배경색: bg-zinc-200 dark:bg-zinc-700
- 둥근 모서리: rounded-lg, rounded-full 등
- 애니메이션: animate-pulse

SkeletonCard 구조 (grid layout):
- 썸네일 영역: aspect-video
- 제목: h-4 w-3/4
- 작성자: h-3 w-1/2
- 날짜: h-3 w-1/4
- 태그 영역: 2-3개의 rounded-full 칩

SkeletonCard 구조 (list layout):
- 좌측 썸네일: w-40 h-full
- 우측 텍스트 영역

Props: layout?: 'grid' | 'list', count?: number (여러 개 렌더링)
  </action>
  <verify>Skeleton 컴포넌트가 올바른 레이아웃으로 렌더링, animate-pulse 동작</verify>
  <done>Skeleton 컴포넌트 생성, grid/list 레이아웃 지원</done>
</task>

<task type="auto">
  <name>Task 3: Apply Skeleton to LinkList loading state</name>
  <files>src/components/LinkList.tsx</files>
  <action>
LinkList의 로딩 상태에 Skeleton 컴포넌트 적용.

현재 로딩 상태가 어떻게 처리되는지 확인 후:
1. 로딩 중일 때 SkeletonCard를 여러 개 (4-6개) 표시
2. 현재 레이아웃 모드(grid/list)에 맞는 스켈레톤 사용
3. 로딩 완료 후 실제 콘텐츠로 부드럽게 전환 (AnimatePresence)

LinkList가 별도 로딩 상태 prop을 받지 않는다면:
- 부모 컴포넌트에서 로딩 상태 관리
- 또는 LinkList 내부에 loading prop 추가

Skeleton import 및 조건부 렌더링:
```tsx
{isLoading ? (
  <SkeletonCard count={6} layout={layout} />
) : (
  <AnimatePresence>
    {links.map(...)}
  </AnimatePresence>
)}
```
  </action>
  <verify>링크 목록 로딩 시 스켈레톤 표시, 로드 완료 시 실제 카드로 전환</verify>
  <done>LinkList 로딩 상태에 Skeleton 적용, 부드러운 전환</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] ViewerModal 열림/닫힘 애니메이션 동작
- [ ] SkeletonCard 컴포넌트 grid/list 레이아웃 정상
- [ ] LinkList 로딩 시 Skeleton 표시
- [ ] npm run build 성공
</verification>

<success_criteria>

- ViewerModal에 scaleIn + fadeIn 애니메이션
- Skeleton 컴포넌트 생성 및 export
- LinkList 로딩 상태에 Skeleton 표시
- 빌드 에러 없음
</success_criteria>

<output>
After completion, create `.planning/phases/21-design-overhaul/21-04-SUMMARY.md`
</output>
