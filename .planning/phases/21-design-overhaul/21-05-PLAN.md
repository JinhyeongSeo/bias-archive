---
phase: 21-design-overhaul
plan: 05
type: execute
depends_on: ["21-04"]
files_modified: [src/components/BiasManager.tsx, src/components/ExternalSearch.tsx, src/components/ExportModal.tsx, src/components/AuthForm.tsx]
---

<objective>
나머지 컴포넌트 애니메이션 적용 및 최종 폴리싱

Purpose: 모든 주요 컴포넌트에 일관된 애니메이션 적용, Phase 21 완료
Output: 전체 앱에 토스 스타일 마이크로인터랙션 적용 완료
</objective>

<execution_context>
./.claude/get-shit-done/workflows/execute-plan.md
./summary.md
./.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/21-design-overhaul/DISCOVERY.md
@.planning/phases/21-design-overhaul/21-04-SUMMARY.md
@src/lib/animations.ts
@src/components/BiasManager.tsx
@src/components/ExternalSearch.tsx
@src/components/ExportModal.tsx
@src/components/AuthForm.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Animate BiasManager interactions</name>
  <files>src/components/BiasManager.tsx</files>
  <action>
BiasManager 컴포넌트에 애니메이션 적용.

1. 최애 추가/그룹 추가 버튼: press 효과 (whileTap: { scale: 0.97 })
2. 그룹 헤더 접기/펼치기: 회전 아이콘 애니메이션 (rotate: isOpen ? 180 : 0)
3. 최애 아이템 리스트: AnimatePresence로 추가/삭제 시 fadeIn/fadeOut
4. 삭제 버튼: press 효과
5. 드래그 앤 드롭 시 카드 스케일 효과 (isDragging 상태 활용)

@hello-pangea/dnd와 framer-motion 조합 시 주의:
- DnD 라이브러리가 transform을 제어하므로, 드래그 중에는 framer-motion transform 비활성화
- isDragging prop으로 조건부 적용
  </action>
  <verify>BiasManager 버튼 press 효과, 그룹 접기 아이콘 회전 애니메이션 확인</verify>
  <done>BiasManager에 버튼 press, 그룹 토글 애니메이션 적용</done>
</task>

<task type="auto">
  <name>Task 2: Animate ExternalSearch and ExportModal</name>
  <files>src/components/ExternalSearch.tsx, src/components/ExportModal.tsx</files>
  <action>
두 모달 컴포넌트에 ViewerModal과 동일한 애니메이션 패턴 적용.

ExternalSearch:
1. 모달 오버레이: fadeIn
2. 모달 컨테이너: scaleIn + slideUp
3. 검색 결과 카드들: stagger 애니메이션 (결과 로드 시)
4. 저장 버튼: press 효과

ExportModal:
1. 모달 오버레이: fadeIn
2. 모달 컨테이너: scaleIn + slideUp
3. 내보내기/가져오기 버튼: press 효과
4. 성공/에러 메시지: fadeIn

AnimatePresence로 isOpen 조건부 렌더링 감싸기.
animations.ts의 variants.modalOverlay, variants.modalContent 활용.
  </action>
  <verify>ExternalSearch, ExportModal 열림/닫힘 애니메이션 동작 확인</verify>
  <done>ExternalSearch, ExportModal에 모달 애니메이션 적용</done>
</task>

<task type="auto">
  <name>Task 3: Animate AuthForm and final polish</name>
  <files>src/components/AuthForm.tsx</files>
  <action>
AuthForm에 애니메이션 적용 및 전체 폴리싱.

AuthForm:
1. 폼 컨테이너: 페이지 로드 시 slideUp + fadeIn
2. 입력 필드: focus 시 미세한 스케일 (1.01) - 선택적
3. 로그인/회원가입 버튼: press 효과 (whileTap: { scale: 0.97 })
4. 모드 전환 링크: hover underline 대신 opacity 전환
5. 에러 메시지: AnimatePresence로 부드럽게 나타남/사라짐

최종 확인:
- 모든 버튼에 일관된 press 효과
- 모든 모달에 일관된 열림/닫힘 애니메이션
- 로딩 상태에 skeleton 또는 적절한 피드백
  </action>
  <verify>AuthForm 버튼 press 효과, 에러 메시지 애니메이션 확인</verify>
  <done>AuthForm 애니메이션 적용, 전체 앱 폴리싱 완료</done>
</task>

<task type="auto">
  <name>Task 4: Mobile optimization - Responsive sidebar and layout</name>
  <files>src/app/[locale]/page.tsx, src/components/Sidebar.tsx, src/styles/globals.css</files>
  <action>
모바일에서 사이드바가 안 보이고 레이아웃이 깨지는 문제 해결.

1. 모바일 breakpoint에서 사이드바 처리:
   - 768px 이하에서 사이드바를 햄버거 메뉴 또는 바텀 시트로 전환
   - 또는 모바일에서 사이드바 숨기고 필터 버튼으로 접근
2. 메인 콘텐츠 영역 모바일 최적화:
   - 카드 그리드 1열로 조정
   - 패딩/마진 조정
3. Header 모바일 대응:
   - 로고/메뉴 적절한 배치
   - 버튼들 overflow 방지
  </action>
  <verify>모바일 뷰포트(375px)에서 레이아웃 정상, 사이드바 접근 가능 확인</verify>
  <done>모바일 반응형 레이아웃 및 사이드바 접근성 개선</done>
</task>

<task type="auto">
  <name>Task 5: Remove name language toggle - Default to auto</name>
  <files>src/components/NameLanguageToggle.tsx, src/contexts/NameLanguageContext.tsx, src/components/Header.tsx</files>
  <action>
이름 언어 모드(en/ko/auto) 토글 버튼 제거, 항상 auto 모드로 고정.

1. NameLanguageToggle 컴포넌트 제거 또는 비활성화
2. Header에서 토글 버튼 렌더링 제거
3. NameLanguageContext에서 기본값을 'auto'로 고정
4. localStorage 저장/불러오기 로직 제거 (항상 auto)
5. auto 모드 동작 유지: UI locale에 따라 name_en/name_ko 자동 선택
  </action>
  <verify>Header에서 이름 언어 토글 버튼 사라짐, 이름이 UI 언어에 맞게 자동 표시됨 확인</verify>
  <done>이름 언어 토글 제거, auto 모드 고정</done>
</task>

<task type="auto">
  <name>Task 6: Fix light mode colors and design</name>
  <files>src/styles/globals.css, tailwind.config.ts</files>
  <action>
라이트 모드(화이트 모드) 색상이 이상한 문제 수정.

1. 라이트 모드 CSS 변수 검토 및 수정:
   - 배경색, 텍스트색, 보더색 조화로운 조합
   - 너무 밝거나 눈이 피로한 색상 조정
2. 버튼/카드/입력 필드 라이트 모드 스타일:
   - 적절한 대비와 가독성 확보
   - 그림자/보더로 입체감
3. 다크모드와 라이트모드 간 전환 시 일관된 느낌 유지
4. CSS 변수 체계적 정리 (--background, --foreground, --card 등)
  </action>
  <verify>라이트 모드에서 색상 조화롭고 가독성 좋은지 확인, 다크모드 전환 자연스러운지 확인</verify>
  <done>라이트 모드 색상 및 디자인 개선</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>전체 앱에 토스 스타일 애니메이션 적용 완료</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. 홈페이지에서 링크 카드들 hover 시 미세하게 떠오르는지 확인
    3. 카드 클릭 시 눌림 효과 확인
    4. Sidebar 태그 버튼 클릭 시 press 효과 확인
    5. 링크 추가 폼에서 미리보기 나타날 때 슬라이드 애니메이션 확인
    6. ViewerModal 열림/닫힘 시 부드러운 스케일+페이드 애니메이션 확인
    7. 외부 검색 모달 열림/닫힘 애니메이션 확인
    8. 로그인/회원가입 페이지 버튼 press 효과 확인
    9. 다크모드에서도 모든 애니메이션 정상 동작 확인
  </how-to-verify>
  <resume-signal>Type "approved" to complete Phase 21, or describe any issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] BiasManager 버튼 및 그룹 토글 애니메이션 동작
- [ ] ExternalSearch, ExportModal 모달 애니메이션 동작
- [ ] AuthForm 버튼 press 효과 동작
- [ ] 모든 컴포넌트에 일관된 애니메이션 스타일
- [ ] 모바일 반응형 레이아웃 정상 동작
- [ ] 이름 언어 토글 제거, auto 모드 고정
- [ ] 라이트 모드 색상 조화롭고 가독성 좋음
- [ ] npm run build 성공
- [ ] 다크모드/라이트모드 모두 정상 동작
</verification>

<success_criteria>

- 모든 버튼에 press 효과 적용
- 모든 모달에 열림/닫힘 애니메이션 적용
- 카드 hover/press 효과 적용
- 리스트 stagger 애니메이션 적용
- Skeleton 로딩 표시
- 모바일 반응형 레이아웃 (사이드바 접근 가능)
- 이름 언어 auto 모드 고정
- 라이트 모드 색상 개선
- Phase 21 complete
</success_criteria>

<output>
After completion, create `.planning/phases/21-design-overhaul/21-05-SUMMARY.md`

Final summary should include:
- All components with animations applied
- Animation library used (framer-motion)
- Key animation patterns (press, hover, modal, stagger)
- Phase 21 complete status
</output>
